<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>RemoveBG</title>
    <meta property="og:title" content="RemoveBG" />
    <meta property="og:image" content="https://raw.githubusercontent.com/NurAktar/bgrem_webapp/main/meta.png" />
    <meta property="og:image" itemprop="image" content="https://raw.githubusercontent.com/NurAktar/bgrem_webapp/main/meta.png">
</head>
<body>
    <span id="nuraktar">Created by Nur Aktar</span>
    <div id="loading" class="loading">
        <img src="loading2.gif" alt="Loading...">
    </div>
    <div class="menubar">
        <input type="file" name="upload" id="upload"  accept=".jpg, .png, .jpeg, .webp">
        <button type="button" onclick="uploadFile()">Upload</button>
    </div>
    <img id="processedImage" style="display:none;" alt="Processed Image">
</body>
<script>
    function uploadFile() {
        document.getElementById("loading").style.display = "flex";
         var inputElement = document.getElementById('upload');
        var file = inputElement.files[0];
  
    if (file) {
        // You can perform additional actions with the file here
        console.log('File selected:', file);
  
        // For demonstration purposes, you can use the Fetch API to upload the file to a server
        var formData = new FormData();
        formData.append('file', file);
  
        fetch('https://nuraktar.pythonanywhere.com/rembg_file', {
          method: 'POST',
          body: formData,
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.blob();
        })
        .then(blob => {
            // Create an object URL for the blob
            const imageUrl = URL.createObjectURL(blob);

            // Display the processed image
            const processedImage = document.getElementById('processedImage');
            processedImage.src = imageUrl;
            processedImage.style.display = 'block';
            document.body.style ="background-color:white; background-image:none;"
            document.getElementById("loading").style.display = "none";
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
    else{
        document.getElementById("loading").style.display = "none";
    }
    }
</script>
</html>